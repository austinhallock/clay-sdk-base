var Clay=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(e){var r,i,o,s,c,u=function(t,e){return function(){return t.apply(e,arguments)}};i=n(1),window.Promise=window.Promise||n(1),s=e.env.TRUSTED_DOMAIN||"clay.io",r=window.self!==window.top,o=function(){function t(){this.postMessage=u(this.postMessage,this),this.onMessage=u(this.onMessage,this),this.methodToFn=u(this.methodToFn,this),this.validateParent=u(this.validateParent,this),this.client=u(this.client,this),this.init=u(this.init,this),this.version="v0.0.7",this.config=new i(function(t,e){return this.resolve=t,this.reject=e,null}),this.debug=!1,this.initHasBeenCalled=!1,this.pendingMessages={},this.nextMessageId=1,window.addEventListener("message",this.onMessage)}return t.prototype.init=function(t){var e,n,o;return o=null!=t?t:{},n=o.gameId,e=o.debug,"string"==typeof n&&/^[0-9]+$/.test(n)?(this.initHasBeenCalled=!0,this.debug=Boolean(e),r?this.validateParent().then(function(t){return function(){return t.postMessage({config:{gameId:n},method:"auth.getStatus"})}}(this)).then(function(t){return function(e){return t.config.resolve({gameId:n,accessToken:null!=e?e.accessToken:void 0}),t.config}}(this)):(this.config.resolve({gameId:n,accessToken:null}),this.config)):i.reject(new Error("Missing or invalid gameId"))},t.prototype.login=function(t){var e;return e=t.scope,i.reject(new Error("Not Implemented"))},t.prototype.api=function(){return i.reject(new Error("Not Implemented"))},t.prototype.client=function(t){var e,n,o,s;return s=null!=t?t:{},n=s.method,o=s.params,this.initHasBeenCalled?"string"!=typeof n?i.reject(new Error("Missing or invalid method")):(null!=o&&"[object Object]"===Object.prototype.toString.call(o)&&(o=[o]),null!=o&&"[object Array]"!==Object.prototype.toString.call(o)?i.reject(new Error("Params must be an array")):(e=function(t){return function(e){var n,r;return n=e.method,r=e.params,t.methodToFn(n).apply(null,r)}}(this),this.config.then(function(t){return function(s){var c,u;return u=s.gameId,r?(c=null,t.postMessage({config:{gameId:u},method:n,params:o})["catch"](function(t){return c=t,e({method:n,params:o})})["catch"](function(t){throw"Method not found"===t.message&&null!==c?c:t})):i.resolve(e({method:n,params:o}))}}(this)))):i.reject(new Error("Must call Clay.init() first"))},t.prototype.validateParent=function(){return this.postMessage({method:"ping",config:{gameId:1}})},t.prototype.methodToFn=function(t){switch(t){case"share.any":return this.shareAny;default:return function(){throw new Error("Method not found")}}},t.prototype.shareAny=function(t){var e,n;if(e=(null!=t?t:{}).text,"string"!=typeof e)throw new Error("text parameter is missing or invalid");return(n=function(t){return t=encodeURIComponent(t.substr(0,140)),window.open("https://twitter.com/intent/tweet?text="+t)})(e)},t.prototype.isValidOrigin=function(t){var e;return e=new RegExp("^https?://(\\w+\\.)?(\\w+\\.)?"+(""+s.replace(/\./g,"\\.")+"/?$")),e.test(t)},t.prototype.onMessage=function(t){var e;if(!this.debug&&!this.isValidOrigin(t.origin))throw new Error("Invalid origin "+t.origin);return e=JSON.parse(t.data),e.id?e.error?this.pendingMessages[e.id].reject(new Error(e.error.message)):this.pendingMessages[e.id].resolve(e.result):void 0},t.prototype.postMessage=function(t){var e,n,r,o,s,c;e=t.config,s=t.method,c=t.params,n=new i(function(t,e){return this.resolve=t,this.reject=e,null}),o={method:s,params:c};try{o.id=this.nextMessageId,o.gameId=e.gameId,o.accessToken=e.accessToken,o._clay=!0,o.jsonrpc="2.0",this.pendingMessages[o.id]=n,this.nextMessageId+=1,window.parent.postMessage(JSON.stringify(o),"*")}catch(u){r=u,n.reject(r)}return n},t}(),c=new o,t.exports={version:c.version,init:c.init,client:c.client,config:c.config}}).call(e,n(2))},function(t,e,n){(function(t){!function(){function e(t){function n(t,e,n,r){if("object"!=typeof u&&"function"!=typeof u||"function"!=typeof t)r();else try{var i=0;t.call(u,function(t){i++||(u=t,e())},function(t){i++||(u=t,n())})}catch(o){u=o,n()}}function r(){var t;try{t=u&&u.then}catch(e){return u=e,c=2,r()}n(t,function(){c=1,r()},function(){c=2,r()},function(){try{1==c&&"function"==typeof i?u=i(u):2==c&&"function"==typeof o&&(u=o(u),c=1)}catch(e){return u=e,f()}u==s?(u=TypeError(),f()):n(t,function(){f(3)},f,function(){f(1==c&&3)})})}if("function"!=typeof t&&void 0!=t)throw TypeError();var i,o,s=this,c=0,u=0,a=[];s.promise=s,s.resolve=function(t){return i=this.fn,o=this.er,c||(u=t,c=1,setTimeout(r)),this},s.reject=function(t){return i=this.fn,o=this.er,c||(u=t,c=2,setTimeout(r)),this},s.then=function(t,n){var r=new e;return r.fn=t,r.er=n,3==c?r.resolve(u):4==c?r.reject(u):a.push(r),r},s["catch"]=function(t){return s.then(null,t)};var f=function(t){c=t||4,a.map(function(t){3==c&&t.resolve(u)||t.reject(u)})};try{"function"==typeof t&&t(s.resolve,s.reject)}catch(h){s.reject(h)}return s}e.resolve=function(t){if(1!=this._d)throw TypeError();return new e(function(e){e(t)})},e.reject=function(t){if(1!=this._d)throw TypeError();return new e(function(e,n){n(t)})},e.all=function(t){function n(e,i){if(i)return r.resolve(i);if(e)return r.reject(e);var o=t.reduce(function(t,e){return e&&e.then?t+1:t},0);0==o&&r.resolve(t),t.map(function(e,r){e&&e.then&&e.then(function(e){return t[r]=e,n(),e},n)})}if(1!=this._d)throw TypeError();if(!(t instanceof Array))return e.reject(TypeError());var r=new e;return n(),r},e.race=function(t){function n(e,i){if(i)return r.resolve(i);if(e)return r.reject(e);var o=t.reduce(function(t,e){return e&&e.then?t+1:t},0);0==o&&r.resolve(t),t.map(function(t){t&&t.then&&t.then(function(t){n(null,t)},n)})}if(1!=this._d)throw TypeError();if(!(t instanceof Array))return e.reject(TypeError());if(0==t.length)return new e;var r=new e;return n(),r},e._d=1,t.exports=e}()}).call(e,n(3)(t))},function(t){function e(){}var n=t.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=e,n.addListener=e,n.once=e,n.off=e,n.removeListener=e,n.removeAllListeners=e,n.emit=e,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);