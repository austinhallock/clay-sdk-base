!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Clay=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function(n){var e,t,r,o,i,u,c,s,a,l,p,d,f,w,g;t=require("promiz"),o=(n.env.TRUSTED_DOMAIN||"clay.io").replace(/\./g,"\\."),e=window.self!==window.top,p={},c=!1,u=null,w=null,i=!1,d=function(){var n;return n=1,function(e){var r,o;r=new t;try{e.id=n,e.gameId=u,e.accessToken=null!=w?w.accessToken:void 0,e._clay=!0,e.jsonrpc="2.0",p[e.id]=r,n+=1,window.parent.postMessage(JSON.stringify(e),"*")}catch(i){o=i,r.reject(o)}return r}}(),l=function(n){var e;if(!i&&!s(n.origin))throw new Error("Invalid origin "+n.origin);return e=JSON.parse(n.data),e.id?e.error?p[e.id].reject(new Error(e.error.message)):p[e.id].resolve(e.result):void 0},g=function(){return d({method:"ping"})},s=function(n){var e;return e=new RegExp("^https?://(\\w+\\.)?(\\w+\\.)?"+o+"/?$"),e.test(n)},a=function(n){switch(n){case"share.any":return f;default:return function(){throw new Error("Method not found")}}},f=function(n){var e,t;return e=n.text,(t=function(n){return n=encodeURIComponent(n.substr(0,140)),window.open("https://twitter.com/intent/tweet?text="+n)})(e)},r=function(){function n(){this.version="v0.0.5",window.addEventListener("message",l)}return n.prototype._setInitialized=function(n){return c=n},n.prototype._setDebug=function(n){return i=n},n.prototype._setFramed=function(n){return e=n},n.prototype._config={},n.prototype.init=function(n){return u=null!=n?n.gameId:void 0,i=Boolean(null!=n?n.debug:void 0),this._config.gameId=u,u?e?g().then(function(){return d({method:"auth.getStatus"})}).then(function(n){return c=!0,w=n}):(c=!0,w={},(new t).resolve(null)):(new t).reject(new Error("Missing gameId"))},n.prototype.login=function(n){var e;return e=n.scope,(new t).reject(new Error("Not Implemented"))},n.prototype.api=function(){return(new t).reject(new Error("Not Implemented"))},n.prototype.client=function(n){var r,o;return c?(o=function(n){var e,t;return e=n.method,t=n.params,a(e).apply(null,t)},e?(r=null,g().then(function(){return d(n)}).then(null,function(e){return r=e,o(n)}).then(null,function(n){throw"Method not found"===n.message&&null!==r?r:n})):(new t).resolve(o(n))):(new t).reject(new Error("Must call Clay.init() first"))},n}(),module.exports=new r}).call(this,require("_process"));
},{"_process":3,"promiz":2}],2:[function(require,module,exports){
!function(){function t(n,e){function o(t,n,e,o){if("object"==typeof i&&"function"==typeof t)try{var c=0;t.call(i,function(t){c++||(i=t,n())},function(t){c++||(i=t,e())})}catch(r){i=r,e()}else o()}function c(){var t;try{t=i&&i.then}catch(f){return i=f,u=2,c()}o(t,function(){u=1,c()},function(){u=2,c()},function(){try{1==u&&"function"==typeof n?i=n(i):2==u&&"function"==typeof e&&(i=e(i),u=1)}catch(c){return i=c,s()}i==r?(i=TypeError(),s()):o(t,function(){s(3)},s,function(){s(1==u&&3)})})}var r=this,u=0,i=0,f=[];r.promise=r,r.resolve=function(t){return u||(i=t,u=1,setTimeout(c)),this},r.reject=function(t){return u||(i=t,u=2,setTimeout(c)),this},r.then=function(n,e){var o=new t(n,e);return 3==u?o.resolve(i):4==u?o.reject(i):f.push(o),o};var s=function(t){u=t||4,f.map(function(t){3==u&&t.resolve(i)||t.reject(i)})}}"undefined"!=typeof module?module.exports=t:this.Promiz=t}();
},{}],3:[function(require,module,exports){
function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")};
},{}]},{},[1])(1)
});